language: python
python:
  - "2.7"
#  - "3.6"

cache: pip

sudo: required
env: CIBW_BEFORE_BUILD="yum install -y 'ftp://ftp.is.co.za/mirror/unity/cooker/repository/x86_64/contrib/release/assimp-3.0.1270-1-omv2013.0.x86_64.rpm' && yum -y install 'ftp://ftp.icm.edu.pl/vol/rzm6/linux-tld-linux/devel/main/x86_64/RPMS/pandoc-1.12.2.1-1.x86_64.rpm' && {pip} install numpy && {pip} install cython && {python} setup.py build_ext --force"
services:
  - docker

addons:
  apt:
    packages:
      - libassimp3
      - libassimp-dev

before_install:
  - pip install -r ./requirements.txt

install:
  - python setup.py build_ext
  - python setup.py install

script:
  - pushd tests && python -m unittest test_simple && popd
  - pip install cibuildwheel==0.7.0
  - cibuildwheel --output-dir wheelhouse